# CI/CD è®¾ç½®è¯´æ˜

## æ¦‚è¿°

æœ¬é¡¹ç›®å·²é…ç½®äº†å®Œæ•´çš„ CI/CD æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š

1. **æœ¬åœ° Pre-push Hook** - åœ¨æ¨é€å‰è‡ªåŠ¨æ£€æŸ¥
2. **GitHub Actions** - åœ¨ GitHub ä¸Šè‡ªåŠ¨æ£€æŸ¥å’ŒéªŒè¯

## æœ¬åœ° Pre-push Hook

### å·¥ä½œåŸç†

å½“ä½ æ‰§è¡Œ `git push` æ—¶ï¼Œä¼šè‡ªåŠ¨è¿è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

```
ğŸ” Running pre-push checks...
ğŸ“ Checking lint...
ğŸ”¨ Building...
ğŸ§ª Running tests...
âœ… All checks passed! Pushing...
```

### æ£€æŸ¥å†…å®¹

- **Lint** (`npm run lint`) - ä»£ç é£æ ¼å’Œè´¨é‡æ£€æŸ¥
- **Build** (`npm run build`) - ç¼–è¯‘æ£€æŸ¥
- **Test** (`npm run test`) - å•å…ƒæµ‹è¯•

### å¦‚æœæ£€æŸ¥å¤±è´¥

æ¨é€ä¼šè¢«é˜»æ­¢ï¼Œä½ éœ€è¦ï¼š

1. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
2. ä¿®å¤é—®é¢˜
3. é‡æ–°æ¨é€

### è·³è¿‡æ£€æŸ¥ï¼ˆä¸æ¨èï¼‰

```bash
git push --no-verify
```

**æ³¨æ„**ï¼šè¿™æ ·ä¼šè·³è¿‡æœ¬åœ°æ£€æŸ¥ï¼Œä½† GitHub Actions ä»ä¼šè¿è¡Œï¼Œå¯èƒ½å¯¼è‡´ CI å¤±è´¥ã€‚

## GitHub Actions å·¥ä½œæµ

### è§¦å‘æ¡ä»¶

å·¥ä½œæµåœ¨ä»¥ä¸‹æƒ…å†µä¸‹è‡ªåŠ¨è¿è¡Œï¼š

- æ¨é€åˆ° `main`ã€`master` æˆ– `develop` åˆ†æ”¯
- åˆ›å»ºæˆ–æ›´æ–° PR åˆ°è¿™äº›åˆ†æ”¯

### å·¥ä½œæµä»»åŠ¡

#### 1. Lint æ£€æŸ¥
- è¿è¡Œ ESLint
- æ£€æŸ¥ä»£ç é£æ ¼å’Œè´¨é‡
- å¤±è´¥ä¼šé˜»æ­¢åˆå¹¶

#### 2. Build æ£€æŸ¥
- è¿è¡Œ `npm run build`
- ç¡®ä¿ä»£ç èƒ½æˆåŠŸç¼–è¯‘
- å¤±è´¥ä¼šé˜»æ­¢åˆå¹¶

#### 3. æµ‹è¯•
- è¿è¡Œ `npm run test`
- æ‰§è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•
- å¤±è´¥ä¼šé˜»æ­¢åˆå¹¶

### æŸ¥çœ‹å·¥ä½œæµçŠ¶æ€

1. è¿›å…¥ GitHub ä»“åº“
2. ç‚¹å‡» "Actions" æ ‡ç­¾
3. æŸ¥çœ‹æœ€æ–°çš„å·¥ä½œæµè¿è¡Œ

### å·¥ä½œæµé…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½äºï¼š`.github/workflows/ci.yml`

## æœ€ä½³å®è·µ

### 1. å®šæœŸè¿è¡Œæœ¬åœ°æ£€æŸ¥

```bash
# åœ¨æ¨é€å‰æ‰‹åŠ¨è¿è¡Œ
npm run lint
npm run build
npm run test
```

### 2. ä¿®å¤ Lint é—®é¢˜

```bash
# è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜
npm run lint -- --fix
```

### 3. ç¼–å†™æµ‹è¯•

ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€‚

### 4. æŸ¥çœ‹ CI æ—¥å¿—

å¦‚æœ GitHub Actions å¤±è´¥ï¼ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—æ¥äº†è§£é—®é¢˜ã€‚

## æ•…éšœæ’é™¤

### Pre-push hook ä¸å·¥ä½œ

ç¡®ä¿ husky å·²æ­£ç¡®å®‰è£…ï¼š

```bash
npm install
npm run prepare
```

### GitHub Actions å¤±è´¥

1. æŸ¥çœ‹ Actions æ ‡ç­¾ä¸­çš„è¯¦ç»†æ—¥å¿—
2. æœ¬åœ°é‡ç°é—®é¢˜
3. ä¿®å¤åé‡æ–°æ¨é€

### ä¾èµ–é—®é¢˜

å¦‚æœé‡åˆ°ä¾èµ–å†²çªï¼Œä½¿ç”¨ï¼š

```bash
npm install --legacy-peer-deps
```

## é…ç½®ä¿®æ”¹

### æ·»åŠ æ–°çš„æ£€æŸ¥

ç¼–è¾‘ `.github/workflows/ci.yml` æ·»åŠ æ–°çš„ä»»åŠ¡ã€‚

### ä¿®æ”¹ Pre-push Hook

ç¼–è¾‘ `.husky/pre-push` ä¿®æ”¹æœ¬åœ°æ£€æŸ¥ã€‚

### ä¿®æ”¹ Lint è§„åˆ™

ç¼–è¾‘ `eslint.config.mjs` ä¿®æ”¹ä»£ç é£æ ¼è§„åˆ™ã€‚

## ç›¸å…³æ–‡ä»¶

- `.github/workflows/ci.yml` - GitHub Actions å·¥ä½œæµé…ç½®
- `.husky/pre-push` - Pre-push hook è„šæœ¬
- `eslint.config.mjs` - ESLint é…ç½®
- `jest.config.js` - Jest æµ‹è¯•é…ç½®
- `package.json` - NPM è„šæœ¬å’Œä¾èµ–

